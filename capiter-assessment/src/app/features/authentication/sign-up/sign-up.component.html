<div fxLayout="row" class="h-100">
    <div fxFlex="30%" 
    class="login-content h-100 bg-primary p-5">
        <h2 class="text-white">Sign up</h2>
    </div>
    <div fxFlex="70%" class="h-100 flex-column d-flex">
        <div class="d-flex justify-content-end p-4">
            <a mat-stroked-button color="primary"
            [routerLink]="['/authentication/signin']">
                Sign in
            </a>
        </div>
        <div class="flex-fill d-flex w-100-p pb-5 mb-5
        align-items-center justify-content-center">
            <div fxFlex="50%" class="margin-auto mb-5 pb-5">
                <h1 class="pb-2 fs-4 form-title">Sign up</h1>
                <form [formGroup]="signUpForm" novalidate
                class="w-100 mt-4" (ngSubmit)="onSubmit()">
                    <div class="w-100-p">
                        <mat-form-field appearance="fill"
                        color="primary" class="w-100">
                            <mat-label>Email</mat-label>
                            <input type="email"
                            placeholder="Enter email..."
                            matInput formControlName="email"
                            autocomplete="new-password">
                        </mat-form-field>
                        <div [ngTemplateOutlet]="validationTpl"
                        [ngTemplateOutletContext]="{
                            key: 'email', msg: 'Email required'}"></div>
                    </div>
                    <div class="w-100-p">
                        <mat-form-field appearance="fill"
                        color="primary" class="w-100">
                            <mat-label>Password</mat-label>
                            <input type="password"
                            placeholder="***************"
                            matInput formControlName="password"
                            autocomplete="new-password">
                        </mat-form-field>
                        <div [ngTemplateOutlet]="validationTpl"
                        [ngTemplateOutletContext]="{
                            key: 'password', msg: 'Password required'}"></div>
                    </div>
                    <div class="w-100-p">
                        <mat-form-field appearance="fill"
                        color="primary" class="w-100">
                            <mat-label>Confirm password </mat-label>
                            <input type="password"
                            placeholder="***************"
                            matInput formControlName="confirmPassword"
                            autocomplete="new-password">
                        </mat-form-field>
                        <div [ngTemplateOutlet]="validationTpl"
                        [ngTemplateOutletContext]="{
                            key: 'confirmPassword', msg: 'Confirm password required'}"></div>
                    </div>
                    <div class="d-flex w-100p pb-5 pt-2">
                        <button mat-raised-button
                        color="primary" class="px-3">
                            Register
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<ng-template #validationTpl let-key="key" let-msg="msg">
    <div *ngIf="(submitted || frm![key].touched) && 
    frm![key].errors" class="invalid-feedback d-flex mt-n3">
        <div *ngIf="frm![key].errors!['required']">{{msg}}</div>
        <div *ngIf="frm![key].errors!['notSame']" class="ml-1">
            Passwords must match
        </div>
    </div>
</ng-template>